<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lbfgs (lbfgs.Lbfgs)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">lbfgs</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Lbfgs</span></h1></header><p>Binding to
<a href="http://users.eecs.northwestern.edu/~nocedal/lbfgsb.html">L-BFGS-B</a>.
These is a limited-memory quasi-Newton code for unconstrained and
for bound-constrained optimization.</p><p>The authors of the original FORTRAN code expect that if you use
their software in a publication, you quote one of these references:</p><ul><li>R. H. Byrd, P. Lu and J. Nocedal. A Limited Memory Algorithm for
Bound Constrained Optimization, (1995), SIAM Journal on
Scientific and Statistical Computing , 16, 5, pp. 1190-1208.</li><li>C. Zhu, R. H. Byrd and J. Nocedal. L-BFGS-B: Algorithm 778:
L-BFGS-B, FORTRAN routines for large scale bound constrained
optimization (1997), ACM Transactions on Mathematical Software,
Vol 23, Num. 4, pp. 550-560.</li><li>J.L. Morales and J. Nocedal. L-BFGS-B: Remark on Algorithm 778:
L-BFGS-B, FORTRAN routines for large scale bound constrained
optimization (2011), to appear in ACM Transactions on
Mathematical Software.</li></ul><div class="spec type" id="type-work"><a href="#type-work" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>work</code><code></code><code></code></div><div class="doc"><p>Represent the memory space needed to solve a minimization problem.
It is usually allocated automatically but it is possible to
do it manually to, say, allocate it once only before a loop.</p></div></div><div class="spec exception" id="exception-Abnormal"><a href="#exception-Abnormal" class="anchor"></a><div class="def exception"><code><span class="keyword">exception </span></code><code><span class="exception">Abnormal</span><span class="keyword"> of </span>float<span class="keyword"> * </span>string</code></div><div class="doc"><p><code class="code">Abnormal(f, msg)</code> is raised if the routine terminated abnormally
without being able to satisfy the termination conditions. In such
an event, the variable <code class="code">x</code> (see <a href="F/index.html#val-min">F.min</a>) will contain the current
best approximation found and <code class="code">f</code> is the value of the target
function at <code class="code">x</code>. <code class="code">msg</code> is a message containing additional
information (returned by the original FORTRAN code).</p><p>If the error message is not precise enough, it is recommended to
turn printing on to understand what is the problem.</p></div></div><div class="spec type" id="type-print"><a href="#type-print" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>print</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-print.No" class="anchored"><td class="def constructor"><a href="#type-print.No" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">No</span></code></td><td class="doc"><p>(** No output is generated. *)</p></td></tr><tr id="type-print.Last" class="anchored"><td class="def constructor"><a href="#type-print.Last" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Last</span></code></td><td class="doc"><p>(** Print one line at the last iteration. *)</p></td></tr><tr id="type-print.Every" class="anchored"><td class="def constructor"><a href="#type-print.Every" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Every</span><span class="keyword"> of </span>int</code></td><td class="doc"><p>(** <code class="code">Every k</code> prints the value of the function and |proj
gradient| every <code class="code">k</code> iterations. Valid values are
<code class="code">0 &lt;= k &lt;= 98</code>, otherwise the closer value in that
interval is used. *)</p></td></tr><tr id="type-print.Details" class="anchored"><td class="def constructor"><a href="#type-print.Details" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Details</span></code></td><td class="doc"><p>(** Print details of every iteration (except vectors). *)</p></td></tr><tr id="type-print.All" class="anchored"><td class="def constructor"><a href="#type-print.All" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">All</span></code></td><td class="doc"><p>(** Print details of every iteration (except vectors)
including changes of active set and final x. *)</p></td></tr><tr id="type-print.Full" class="anchored"><td class="def constructor"><a href="#type-print.Full" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Full</span></code></td><td class="doc"><p>(** Print details of every iteration including x and g. *)</p></td></tr></table><code></code></div><div class="doc"><p>Control of the frequency at which information is outputted.</p></div></div><div class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>state</code><code></code><code></code></div><div class="doc"><p>Holds informations on the current state of the computation that
can help to decide whether to stop.</p></div></div><div class="spec module" id="module-F"><a href="#module-F" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="F/index.html">F</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Fortran Layout.</p></div></div><div class="spec module" id="module-C"><a href="#module-C" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="C/index.html">C</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>C layout.</p></div></div><div class="spec val" id="val-work"><a href="#val-work" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>work : ?&#8288;corrections:int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-work">work</a></code></div><div class="doc"><p><code class="code">work n</code> allocate the work space for a problem of size at most <code class="code">n</code>.</p><ul class="at-tag"><li><span class="at-tag parameter">Parameter</span> <span class="module-path">corrections</span>: See <a href="F/index.html#val-min">F.min</a>.</li></ul></div></div><h3>Accessing the state</h3><div class="spec val" id="val-is_constrained"><a href="#val-is_constrained" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>is_constrained : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> bool</code></div><div class="doc"><p>Tells whether the problem is constrained.</p></div></div><div class="spec val" id="val-nintervals"><a href="#val-nintervals" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nintervals : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The total number of intervals explored in the search of Cauchy
points.</p></div></div><div class="spec val" id="val-nskipped_updates"><a href="#val-nskipped_updates" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nskipped_updates : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The total number of skipped BFGS updates before the current
iteration.</p></div></div><div class="spec val" id="val-iter"><a href="#val-iter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The number of current iteration.</p></div></div><div class="spec val" id="val-nupdates"><a href="#val-nupdates" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nupdates : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The total number of BFGS updates prior the current iteration.</p></div></div><div class="spec val" id="val-nintervals_current"><a href="#val-nintervals_current" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nintervals_current : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The number of intervals explored in the search of Cauchy point in
the current iteration.</p></div></div><div class="spec val" id="val-neval"><a href="#val-neval" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>neval : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The total number of function and gradient evaluations.</p></div></div><div class="spec val" id="val-neval_current"><a href="#val-neval_current" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>neval_current : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>The number of function value or gradient evaluations in the
current iteration.</p></div></div><div class="spec val" id="val-previous_f"><a href="#val-previous_f" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>previous_f : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>Returns f(x) in the previous iteration.</p></div></div><div class="spec val" id="val-norm_dir"><a href="#val-norm_dir" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>norm_dir : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>2-norm of the line search direction vector.</p></div></div><div class="spec val" id="val-eps"><a href="#val-eps" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>eps : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The machine precision epsmch generated by the code.</p></div></div><div class="spec val" id="val-time_cauchy"><a href="#val-time_cauchy" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>time_cauchy : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The accumulated time spent on searching for Cauchy points.</p></div></div><div class="spec val" id="val-time_subspace_min"><a href="#val-time_subspace_min" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>time_subspace_min : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The accumulated time spent on subspace minimization.</p></div></div><div class="spec val" id="val-time_line_search"><a href="#val-time_line_search" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>time_line_search : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The accumulated time spent on line search.</p></div></div><div class="spec val" id="val-slope"><a href="#val-slope" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>slope : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The slope of the line search function at the current point of line
search.</p></div></div><div class="spec val" id="val-slope_init"><a href="#val-slope_init" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>slope_init : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The slope of the line search function at the starting point of the
line search.</p></div></div><div class="spec val" id="val-normi_grad"><a href="#val-normi_grad" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>normi_grad : <a href="index.html#type-state">state</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>The infinity norm of the projected gradient</p></div></div></body></html>